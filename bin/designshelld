#!/usr/bin/env ruby
#
# This file was generated by Bundler.
#
# The application 'designshelld' is installed as part of a gem, and
# this file is here to facilitate running it.
#

# This was then hacked so that it could be called direct from authorized_keys command=...

require 'pathname'
ENV['BUNDLE_GEMFILE'] ||= File.expand_path("../../Gemfile",
  Pathname.new(__FILE__).realpath)

require 'rubygems'
require 'bundler/setup'

#load Gem.bin_path('designshell', 'designshelld')

require 'designshellserver'

#trap("SIGHUP") { abort }

context = DesignShell::Context.new({
	:argv=>ARGV.clone,
	:env=>ENV.clone,
	:stdout=>$stdout,
	:stdin=>$stdin,
	:stderr=>$stderr,
  :credentials=>Credentials.new('DesignShellServer')
})
core = DesignShellServer::Core.new(context)
core.run
